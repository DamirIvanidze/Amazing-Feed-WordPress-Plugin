jQuery(document).ready((function(s){jQuery(".adminform_ajax").each((function(){var a=s(this),e=a.find('input[type="submit"]'),t="Поле обязательно для заполнения!",i="Количество символов должно быть не меньше 2!",n="Неверный формат. Ипользуйте http или https перед адресом сайта. Пример: http://google.com";e.click((function(){if(a.find(".js-inspect-text").each((function(){""==s(this).val()?(s(this).removeClass("is-valid"),s(this).addClass("is-invalid"),s(this).siblings("small").text(t)):jQuery(this).val().length<2?(s(this).removeClass("is-valid"),s(this).addClass("is-invalid"),s(this).siblings("small").text(i)):(s(this).removeClass("is-invalid"),s(this).addClass("is-valid"),s(this).siblings("small").text(""))})),a.find(".js-inspect-url").each((function(){var a,e=(a=s(this).val(),/^(https?|s?ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i.test(a));""==s(this).val()?(s(this).removeClass("is-valid"),s(this).addClass("is-invalid"),s(this).siblings("small").text(t)):0==e?(s(this).removeClass("is-valid"),s(this).addClass("is-invalid"),s(this).siblings("small").text(n)):(s(this).removeClass("is-invalid"),s(this).addClass("is-valid"),s(this).siblings("small").text(""))})),0!==a.find(".is-invalid").size())return!1}))}))}));var ajaxgo=!1;jQuery(document).ready((function(s){var a=jQuery(".adminform_ajax");var e={dataType:"json",beforeSubmit:function(a,e,i){if(ajaxgo)return e.find(".response").html('<p class="error">Необходимо дождаться ответа от предыдущего запроса.</p>'),!1;if(e.find("input[type=submit]").hasClass("js-generate-shortcode")){var n=[],l=[];s(".js-sortable-filtres li").each((function(a,e){n.push(s(this).data("name"))})),n=n.join(";"),a.push({name:"filters",value:n,type:"hidden",required:!1}),s(".js-sortable-filtres-name li").each((function(a,e){l.push(s(this).data("name"))})),l=l.join(";"),a.push({name:"filters_name",value:l,type:"hidden",required:!1})}e.find("input[type=submit]").prop("disabled",!0).val("Подождите.."),e.find(".response").html(""),ajaxgo=!0,e.find("input[type=submit]").hasClass("js-remove-all-posts")&&(s(".js-remove-all-posts-progress-bar span").css("width","0"),s(".js-remove-all-posts-progress-bar").fadeIn("slow"),t())},success:function(a,e,t,i){if(i.find("input").removeClass("is-invalid"),i.find("input[type=submit]").hasClass("js-remove-all-posts")&&s(".js-remove-all-posts-progress-bar").fadeOut("slow"),a.success){var n='<p class="alert alert-success">'+a.data.message+"</p>";i.find(".response").html(n),i.find("input[type=submit]").prop("disabled",!0).val("Готово")}else{if(a.data.message){n='<p class="alert alert-danger">'+a.data.message+"</p>";i.find(".response").html(n)}i.find("input[type=submit]").prop("disabled",!1).val("Попробовать снова")}a.data.redirect&&(window.location.href=a.data.redirect),ajaxgo=!1},error:function(s){console.log(arguments)},url:ajax_var};function t(){setInterval((function(){s.ajax({type:"POST",url:ajax_var,dataType:"json",data:"action=check_progress",success:function(a){a.success&&(a.data.check_progress&&s(".js-remove-all-posts-progress-bar span").css("width",a.data.check_progress+"%"),a.data.next_cron_time&&s(".js-next-cron-time").text(a.data.next_cron_time),a.data.cron_func_run>0&&a.data.cron_func_run<100?(s(".js-cron-status span").removeClass().addClass("is-active").text("Функция запущена"),s(".js-cron").prop("disabled",!0),s(".js-remove-all-posts").prop("disabled",!0)):(s(".js-cron-status span").removeClass().addClass("is-not-active").text("Функция не запущена"),s(".js-cron").prop("disabled",!1),s(".js-remove-all-posts").prop("disabled",!1)),a.data.published_posts&&s(".js-count-posts").text(a.data.published_posts))}})}),1e3)}a.ajaxForm(e),s("#cron-table").length&&t()})),jQuery(document).ready((function(s){var a={drop:function(a,e){s(this).val(e.draggable[0].dataset.xpath)}};if((s(".xml__tagname").length||s(".drop-input").length)&&(s(".xml__tagname").draggable({cursor:"grabbing",helper:"clone",appendTo:"body"}),s(".drop-input").droppable(a),s(".js-add-new-field").click((function(e){e.preventDefault(),s(this).before('<div class="row mt-2"><div class="col-xs"><input type="text" name="custom_name[]" value="" class="w-100 js-inspect-text" placeholder="Название поля"><small></small></div><div class="col-xs"><input type="text" name="custom_value[]" value="" class="w-100 drop-input js-inspect-text" placeholder="Значение поля"><small></small></div><div class="col-xs-1"><a href="#" class="js-remove-field"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M296 432h16a8 8 0 0 0 8-8V152a8 8 0 0 0-8-8h-16a8 8 0 0 0-8 8v272a8 8 0 0 0 8 8zm-160 0h16a8 8 0 0 0 8-8V152a8 8 0 0 0-8-8h-16a8 8 0 0 0-8 8v272a8 8 0 0 0 8 8zM440 64H336l-33.6-44.8A48 48 0 0 0 264 0h-80a48 48 0 0 0-38.4 19.2L112 64H8a8 8 0 0 0-8 8v16a8 8 0 0 0 8 8h24v368a48 48 0 0 0 48 48h288a48 48 0 0 0 48-48V96h24a8 8 0 0 0 8-8V72a8 8 0 0 0-8-8zM171.2 38.4A16.1 16.1 0 0 1 184 32h80a16.1 16.1 0 0 1 12.8 6.4L296 64H152zM384 464a16 16 0 0 1-16 16H80a16 16 0 0 1-16-16V96h320zm-168-32h16a8 8 0 0 0 8-8V152a8 8 0 0 0-8-8h-16a8 8 0 0 0-8 8v272a8 8 0 0 0 8 8z"/></svg></a></div></div>'),s(".drop-input").droppable(a)})),s(document).on("click","a.js-remove-field",(function(a){a.preventDefault(),s(this).parents(".row.mt-2").remove()}))),s(".swiper-container").length){var e=new Swiper(".swiper-container",{allowTouchMove:!1,navigation:{nextEl:".swiper-next",prevEl:".swiper-prev"},keyboard:{enabled:!0,onlyInViewport:!0},runCallbacksOnInit:!0,on:{slideChange:function(){s("#js-current-slide").val(e.activeIndex+1)}}});s("#js-total-slides").text(e.slides.length),s("#js-current-slide").on("change",(function(a){a.preventDefault(),e.slideTo(s(this).val()-1)}))}s(".js-sortable").sortable({start:function(a,e){s(this).data("elPos",e.item.index())},update:function(a,e){var t=s(this).data("elPos");s(".js-sortable").not(s(this)).each((function(a,i){t>e.item.index()?s(this).children("li:eq("+t+")").insertBefore(s(this).children("li:eq("+e.item.index()+")")):s(this).children("li:eq("+t+")").insertAfter(s(this).children("li:eq("+e.item.index()+")"))}))}}).disableSelection(),s(".js-sortable input").each((function(a,e){s(this).keyup((function(){s(this).parent().attr("data-name",s(this).val())}))})),s(".js-copy-to-buffer").click((function(a){a.preventDefault();var e,t,i=s(this).data("target");e=i,t=s("<input>"),s("body").append(t),t.val(s(e).text()).select(),document.execCommand("copy"),t.remove(),s(this).find("span").length?s(this).find("span").removeClass("dashicons-admin-page").addClass("dashicons-yes"):s(this).text("Скопировано")}))}));
//# sourceMappingURL=admin.script.min.js.map