jQuery(document).ready((function(e){var t,a=e(".mixer"),o=document.querySelector('[name="minSize"]'),s=document.querySelector('[name="maxSize"]');if(a.length){function i(){t.filter(t.getState().activeFilter)}a.find(".mix:odd").addClass("js-stripped-color"),t=mixitup(a,{selectors:{control:"[data-mixitup-control]"},multifilter:{enable:!0},pagination:{limit:10},callbacks:{onMixFail:function(){e(".mixer__failmessage").show()},onMixStart:function(){a.find(".mix").removeClass("js-stripped-color").removeClass("js-not-hide"),e(".mixer__failmessage").hide()},onMixEnd:function(){a.find(".mix").each((function(){"none"!==e(this).css("display")&&e(this).addClass("js-not-hide")})),a.find(".mix.js-not-hide:odd").addClass("js-stripped-color")}},templates:{pager:'<button type="button" class="${classNames}" data-page="${pageNumber}" data-mixitup-control>${pageNumber}</button>',pagerPrev:'<button type="button" class="${classNames}" data-page="prev" data-mixitup-control>&laquo;</button>',pagerNext:'<button type="button" class="${classNames}" data-page="next" data-mixitup-control>&raquo;</button>',pageStats:"от ${startPageAt} до ${endPageAt} из ${totalTargets}",pageStatsSingle:"${startPageAt} из ${endPageAt}",pageStatsFail:"Ничего не найдено"}}),mixitup.Mixer.registerFilter("testResultEvaluateHideShow","range",(function(e,t){var a=Number(t.dom.el.getAttribute("data-area")),i={min:Number(o.value),max:Number(s.value)};return(a<=i.min||a>=i.max)&&(e=!1),e})),o.addEventListener("change",i),s.addEventListener("change",i)}var n,r,d=e(".js-range-slider"),l=e(".js-from"),c=e(".js-to"),m=c.val();d.ionRangeSlider({type:"double",min:0,max:m,step:5,prettify_enabled:!1,onChange:function(e){n=e.from,r=e.to,l.prop("value",n),c.prop("value",r),i(document.querySelector(".mixer"))}});var u=e(".js-range-slider").data("ionRangeSlider");if(e("button[type=reset]").on("click",(function(){o.value=0,s.value=m,u.update({from:0,to:m})})),e(".mixer__sort a").on("click",(function(t){t.preventDefault(),e(".mixer__sort a").not(e(this)).removeClass("active"),e(this).toggleClass("active");var a=e(this).attr("id");e(this).attr("data-sort",(function(e,t){return t==a+":desc"?a+":asc":a+":desc"}))})),e(".js-modal-link").click((function(t){t.preventDefault(),e(".modal-shortcode-twbs__descr").empty();var a=e(this).data("flat_number");a&&e('<p class="flat_number">Квартира: '+a+"</p>").appendTo(".modal-shortcode-twbs__descr");var o=e(this).data();delete o.image,delete o.flat_number,delete o.filters_name;var s=e.map(o,(function(e,t){return[[e,t]]}));s.reverse();var i=e(this).data("filters_name").split(";");e.each(s,(function(t,a){if("rooms"==a[1]&&0==a[0])i[t]="Студия",a[0]="";else if("area"==a[1]){var o=i[t];i[t]="<span>"+a[0]+" м<sup>2</sup></span>",a[0]="<span>"+o+"</span>"}else if("renovation"==a[1]){switch(a[0]){case 0:a[0]="без отделки";break;case 1:a[0]="черновая отделка";break;case 2:a[0]="c отделкой"}i[t]=i[t]+": "}else i[t]=i[t]+": ";e('<p class="'+a[1]+'">'+i[t]+a[0]+"</p>").appendTo(".modal-shortcode-twbs__descr")}));var n=e(this).data("image");n?(e(".modal-shortcode-twbs svg").hide(),e(".modal-shortcode-twbs img").attr("data-src",n).show()):(e(".modal-shortcode-twbs img").hide(),e(".modal-shortcode-twbs svg").show()),e(".modal-shortcode-twbs").modal("show"),lozad(".lozad",{loaded:function(e){e.onload=function(){e.classList.add("loaded")}}}).observe()})),e(".modal-shortcode-twbs").on("hidden.bs.modal",(function(t){e(this).find("img").attr({"data-src":"",src:"","data-loaded":""}).removeClass("loaded"),console.log("test")})),e(window).width()>992&&(e("#mixer_accordion").mousemove((function(t){var a=e(this).offset(),o=a.left,s=a.top,i=t.pageX-o,n=t.pageY-s;e(".js-mix-tooltip").show(),e(".js-modal-link").show(),e(".js-mix-tooltip").css({left:i+"px",top:n+"px"})})),e("#mixer_accordion").mouseleave((function(){return e(".js-mix-tooltip").hide(),!1})),e("#mixer_accordion .js-callbackwidget").mousemove((function(t){return e(".js-mix-tooltip").hide(),!1}))),"/flats/"===window.location.pathname&&""!==window.location.hash){var p=window.location.hash.substr(1);jQuery("html, body").animate({scrollTop:jQuery(".mixer").offset().top},800),t.filter(".building_section-"+p)}}));
//# sourceMappingURL=twbs-shortcode.min.js.map